"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[408],{3276:function(e,t,o){o(121);var s=o(9269),a=o(6237),n=o(3856),r=o(3027),i=o(6146),l=o(64),u=o(4300),c=o(6380);t.Z=(0,n.L)({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:t,emit:o}){const n=(0,s.FN)(),d=(0,a.iH)(null);let m=0;const p=[];function f(t){const s="boolean"===typeof t?t:!0!==e.noErrorFocus,a=++m,n=(e,t)=>{o("validation"+(!0===e?"Success":"Error"),t)},r=e=>{const t=e.validate();return"function"===typeof t.then?t.then((t=>({valid:t,comp:e})),(t=>({valid:!1,comp:e,err:t}))):Promise.resolve({valid:t,comp:e})},i=!0===e.greedy?Promise.all(p.map(r)).then((e=>e.filter((e=>!0!==e.valid)))):p.reduce(((e,t)=>e.then((()=>r(t).then((e=>{if(!1===e.valid)return Promise.reject(e)}))))),Promise.resolve()).catch((e=>[e]));return i.then((e=>{if(void 0===e||0===e.length)return a===m&&n(!0),!0;if(a===m){const{comp:t,err:o}=e[0];if(void 0!==o&&console.error(o),n(!1,t),!0===s){const t=e.find((({comp:e})=>"function"===typeof e.focus&&!1===(0,c.$D)(e.$)));void 0!==t&&t.comp.focus()}}return!1}))}function h(){m++,p.forEach((e=>{"function"===typeof e.resetValidation&&e.resetValidation()}))}function v(t){void 0!==t&&(0,r.NS)(t);const s=m+1;f().then((a=>{s===m&&!0===a&&(void 0!==e.onSubmit?o("submit",t):void 0!==t&&void 0!==t.target&&"function"===typeof t.target.submit&&t.target.submit())}))}function g(t){void 0!==t&&(0,r.NS)(t),o("reset"),(0,s.Y3)((()=>{h(),!0===e.autofocus&&!0!==e.noResetFocus&&b()}))}function b(){(0,i.jd)((()=>{if(null===d.value)return;const e=d.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||d.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||d.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(d.value.querySelectorAll("[tabindex]"),(e=>e.tabIndex>-1));null!==e&&void 0!==e&&e.focus({preventScroll:!0})}))}(0,s.JJ)(u.vh,{bindComponent(e){p.push(e)},unbindComponent(e){const t=p.indexOf(e);t>-1&&p.splice(t,1)}});let w=!1;return(0,s.se)((()=>{w=!0})),(0,s.dl)((()=>{!0===w&&!0===e.autofocus&&b()})),(0,s.bv)((()=>{!0===e.autofocus&&b()})),Object.assign(n.proxy,{validate:f,resetValidation:h,submit:v,reset:g,focus:b,getValidationComponents:()=>p}),()=>(0,s.h)("form",{class:"q-form",ref:d,onSubmit:v,onReset:g},(0,l.KR)(t.default))}})},5408:function(e,t,o){o.r(t),o.d(t,{default:function(){return V}});var s=o(9269),a=o(6949);const n=e=>((0,s.dD)("data-v-b467091a"),e=e(),(0,s.Cn)(),e),r={class:"row full-width"},i={class:"col-md-8 offset-md-2 col-xs-12 q-pl-md q-pr-md q-pt-sm"},l={class:"row"},u={class:"col-md-6 col-xs-12 q-pa-md"},c={class:"col-md-6 col-xs-12"},d={class:"q-pa-md"},m=n((()=>(0,s._)("div",{class:"text-h6 q-pb-md text-blue-8 text-center text-weight-bolder"}," Login as administrator ",-1))),p={class:"icon-container"};function f(e,t,o,n,f,h){const v=(0,s.up)("q-img"),g=(0,s.up)("q-input"),b=(0,s.up)("q-icon"),w=(0,s.up)("q-btn"),y=(0,s.up)("q-form"),q=(0,s.up)("q-card"),x=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(x,{padding:"",class:"row items-center justify-center"},{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("div",i,[(0,s.Wm)(q,{flat:"",class:"bg-white text-black"},{default:(0,s.w5)((()=>[(0,s._)("div",l,[(0,s._)("div",u,[(0,s.Wm)(v,{"placeholder-src":a,src:a,"spinner-color":"white"})]),(0,s._)("div",c,[(0,s._)("div",d,[m,(0,s.Wm)(y,{onSubmit:h.onSubmit,onReset:h.onReset,class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{filled:"",modelValue:f.username,"onUpdate:modelValue":t[0]||(t[0]=e=>f.username=e),label:"Username","lazy-rules":"",rules:[e=>e&&e.length>0||"Username is required!"]},null,8,["modelValue","rules"]),(0,s.Wm)(g,{filled:"",type:f.showPassword?"text":"password",modelValue:f.password,"onUpdate:modelValue":t[1]||(t[1]=e=>f.password=e),label:"Password","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Password is required!"]},{default:(0,s.w5)((()=>[(0,s._)("div",p,[f.showPassword?((0,s.wg)(),(0,s.j4)(b,{key:0,name:"visibility",onClick:h.togglePasswordVisibility},null,8,["onClick"])):((0,s.wg)(),(0,s.j4)(b,{key:1,name:"visibility_off",onClick:h.togglePasswordVisibility},null,8,["onClick"]))])])),_:1},8,["type","modelValue","rules"]),(0,s._)("div",null,[(0,s.Wm)(w,{label:"Login",type:"submit",color:"primary"}),(0,s.Wm)(w,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])])),_:1},8,["onSubmit","onReset"])])])])])),_:1})])])])),_:1})}o(121);var h={data(){return{username:null,password:null,err:null,showPassword:!1}},methods:{onSubmit(){let e={username:this.username,password:this.password};this.$axios.post("/api/user/login",e).then((async e=>{if("ok"!==e.data.status)this.$q.notify({message:`${e.data.message}`,color:"red"});else{let t=e.data.user,o=e.data.token;await this.$q.notify({message:`${e.data.message}`,color:"green-5"}),await this.$store.dispatch("login",t),await this.$store.dispatch("token",o),await this.$router.push("/users")}}))},onReset(){this.username=null,this.password=null},togglePasswordVisibility(){this.showPassword=!this.showPassword}}},v=o(7617),g=o(3856),b=o(64),w=o(4300),y=(0,g.L)({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:o}}=(0,s.FN)(),a=(0,s.f3)(w.YE,w.qO);if(a===w.qO)return console.error("QPage needs to be a deep child of QLayout"),w.qO;const n=(0,s.f3)(w.Mw,w.qO);if(n===w.qO)return console.error("QPage needs to be child of QPageContainer"),w.qO;const r=(0,s.Fl)((()=>{const t=(!0===a.header.space?a.header.size:0)+(!0===a.footer.space?a.footer.size:0);if("function"===typeof e.styleFn){const s=!0===a.isContainer.value?a.containerHeight.value:o.screen.height;return e.styleFn(t,s)}return{minHeight:!0===a.isContainer.value?a.containerHeight.value-t+"px":0===o.screen.height?0!==t?`calc(100vh - ${t}px)`:"100vh":o.screen.height-t+"px"}})),i=(0,s.Fl)((()=>"q-page"+(!0===e.padding?" q-layout-padding":"")));return()=>(0,s.h)("main",{class:i.value,style:r.value},(0,b.KR)(t.default))}}),q=o(8055),x=o(4711),P=o(3276),S=o(6053),_=o(4633),F=o(4686),k=o(1410),C=o.n(k);const Q=(0,v.Z)(h,[["render",f],["__scopeId","data-v-b467091a"]]);var V=Q;C()(h,"components",{QPage:y,QCard:q.Z,QImg:x.Z,QForm:P.Z,QInput:S.Z,QIcon:_.Z,QBtn:F.Z})}}]);
//# sourceMappingURL=408.1a4fa56c.js.map